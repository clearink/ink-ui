var x=Object.defineProperty;var P=(t,e,s)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var f=(t,e,s)=>P(t,typeof e!="symbol"?e+"":e,s);import{c as g,r as y,a as T,b as j,j as d,g as C,d as w,h as z,f as k,v as N,w as R,S as V,e as D}from"./index-D1xS8C2F.js";import{u as F,b as I}from"./index-DRMgSHDn.js";import{g as p}from"./index-L_kA_Kk-.js";import{r as M}from"./reflow-BpSDi-_2.js";function O(t,e){const{checked:s,className:o,classNames:r={},disabled:a,showThumb:l}=e;return{label:g(`${t}__label`,r.label),radio:g(`${t}__radio`),root:g(t,{[`${t}--disabled`]:a,[`${t}--selected`]:s&&!l},o,r.root)}}function H(t,e){const{checked:s,disabled:o,label:r,onChange:a,title:l,value:c}=t,m=T("segmented-item"),i=O(m,t),h=j(t);return d.jsxs("label",{ref:e,className:i.root,style:h.root,children:[d.jsx("input",{className:i.radio,checked:s,disabled:o,type:"radio",onChange:()=>{!o&&a(c)}}),d.jsx("div",{className:i.label,style:h.label,title:l,children:r})]})}const W=y.forwardRef(H);function q(t,e){const{block:s,className:o,classNames:r={},disabled:a,size:l}=e;return{group:g(`${t}__group`,r.group),root:g(t,{[`${t}--block`]:s,[`${t}--disabled`]:a,[`${t}--lg`]:l==="large",[`${t}--sm`]:l==="small"},o,r.root),thumb:g(`${t}__thumb`,r.thumb)}}class A{constructor(){f(this,"$group",{current:null});f(this,"$thumb",{current:null});f(this,"items",new Map);f(this,"inTransition",!1);f(this,"reset",()=>{this.inTransition=!1})}get group(){return this.$group.current}get thumb(){return this.$thumb.current}}function B(t){const e=C(()=>new A),[s,o]=w([null,t]),[r,a]=w(!1),l=(n,u)=>{const $=p(e.group),S=u.left-$.left;n.style.setProperty("transform",`translate3d(${S}px, 0, 0)`),n.style.setProperty("width",`${u.width}px`)},c=()=>{if(!e.thumb||!e.inTransition)return;const n=e.items.get(t);!n||!e.group||l(e.thumb,p(n))},m=n=>{const u=e.items.get(s[0]);!u||!e.group||(e.inTransition=!0,n.style.setProperty("transition-duration","0s","important"),l(n,p(u)),M(n),n.style.removeProperty("transition-duration"))},i=n=>{const u=e.items.get(s[1]);!u||!e.group||l(n,p(u))},h=n=>{e.inTransition=!1,n.style.removeProperty("transform"),n.style.removeProperty("width"),a(!1)};return{returnEarly:z(t,()=>{o([s[1],t]),a(!0),c()}),refs:e,showThumb:r,handleEnter:m,handleEntering:i,handleEntered:h}}function G(t,e){var a;const{defaultValue:s,onChange:o,value:r}=t;return F({defaultValue:k(s,(a=e[0])==null?void 0:a.value),onChange:o,value:r})}const J={block:!1};function K(t=[]){return t.map(e=>{if(!N(e))return{label:e,title:`${e}`,value:e};const{label:s,title:o}=e,r=k(o,N(s)?void 0:`${s}`);return{...e,title:r}})}function L(t,e){const s=R(t,{...J,size:V.useState()}),{disabled:o,options:r}=s,a=T("segmented"),l=q(a,s),c=j(s),m=I(()=>K(r),[r]),[i,h]=G(s,m),{returnEarly:E,refs:n,showThumb:u,handleEnter:$,handleEntering:S,handleEntered:_}=B(i);return y.useEffect(()=>()=>{n.reset()},[n]),E?null:d.jsx("div",{ref:e,className:l.root,style:c.root,children:d.jsxs("div",{ref:n.$group,className:l.group,style:c.group,children:[u&&d.jsx(D,{appear:!0,when:!0,timeouts:3e3,classNames:`${a}-thumb-motion`,onEnter:$,onEntering:S,onEntered:_,children:d.jsx("div",{ref:n.$thumb,className:l.thumb,style:c.thumb})}),m.map(b=>y.createElement(W,{...b,key:b.value,ref:v=>{v?n.items.set(b.value,v):n.items.delete(b.value)},checked:i===b.value,disabled:o||b.disabled,showThumb:u,onChange:h}))]})})}const ee=y.forwardRef(L);export{ee as S};
