var ht=Object.defineProperty;var pt=(e,t,n)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var l=(e,t,n)=>pt(e,typeof t!="symbol"?t+"":t,n);import{h as L,k as q,q as G,r as v,R as z,n as _,f as Tt}from"./index-CtQgf38W.js";import{u as gt,j as Ct,n as B,k as Et,g as vt,m as S,b as y,l as xt}from"./index-D8thIb-8.js";import{c as Ft}from"./classnames-i4W5uzNT.js";function Mt(e,t){return Object.is(e,t)}function wt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];n.forEach(u=>{u&&u.split(/\s+/).forEach(r=>r&&e.classList.add(r))})}function W(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];n.forEach(u=>{u&&u.split(/\s+/).forEach(r=>r&&e.classList.remove(r))})}const tt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function D(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t.filter(L);return function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];const f=s.map(h=>h.apply(this,o)).filter(L);if(f.length)return function(){for(var p=arguments.length,C=new Array(p),I=0;I<p;I++)C[I]=arguments[I];f.forEach(V=>{V.apply(this,C)})}}}function M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return q(e)?n.find(u=>!q(u)):e}function It(e){return G(e)?`${e.charAt(0).toUpperCase()}${e.slice(1)}`:e}function J(e){return G(e)?e.split("-").reduce((t,n,s)=>t+(s===0?n:It(n)),""):e}function $t(e){const t=v.useRef();return t.current||(t.current={value:e()}),t.current.value}function At(){return v.useReducer(e=>e+1,0)[1]}const K=tt?z.useLayoutEffect:z.useEffect;function Vt(e){return L(e)?{compare:Mt,listener:e}:e}const Q=Symbol.for("use-watch-value-hook");function Y(e,t){const{compare:n,listener:s,immediate:u}=Vt(t),r=v.useRef(u?Q:e);return v.useMemo(()=>{const o=r.current===Q;if(!o&&n(e,r.current))return!1;const c=s(e,o?null:r.current);return r.current=e,!!c},[n,e,s])}const w=0,d=1,g=2,R=e=>e===w,E=e=>e===g,nt="entering",U="entered",st="exiting",H="exited",et=e=>e===nt,rt=e=>e===U,at=e=>e===st,b=e=>e===H,Nt=e=>et(e)||at(e);function St(e){const{classNames:t}=e;return v.useMemo(()=>{const n=[w,d,g].reduce((u,r)=>(u[r]={from:void 0,active:void 0,done:void 0},u),{});if(!t)return n;const s=G(t);return n[d].from=s?`${t}-enter-from`:t.enterFrom,n[d].active=s?`${t}-enter-active`:t.enterActive,n[d].to=s?`${t}-enter-to`:t.enterTo,n[d].done=s?`${t}-enter-done`:t.enterDone,n[g].from=s?`${t}-exit-from`:t.exitFrom,n[g].active=s?`${t}-exit-active`:t.exitActive,n[g].to=s?`${t}-exit-to`:t.exitTo,n[g].done=s?`${t}-exit-done`:t.exitDone,n[w].from=s?n[d].from:M(t.appearFrom,t.enterFrom),n[w].active=s?n[d].active:M(t.appearFrom,t.enterFrom),n[w].to=s?n[d].to:M(t.appearTo,t.enterTo),n[w].done=s?n[d].done:M(t.appearDone,t.enterDone),n},[t])}function Rt(e,t){v.useImperativeHandle(e,()=>({get element(){return t.instance},get status(){return t.status},get isEntering(){return et(t.status)},get isEntered(){return rt(t.status)},get isExiting(){return at(t.status)},get isExited(){return b(t.status)}}),[t])}function O(e,t){let n=0;return function(){++n>=e&&t(...arguments)}}const Z=e=>(Number.parseFloat(e)||0)*1e3;function k(e,t){const n=c=>`${e[c]||""}`.split(", "),s=n(`${t}Delay`),u=s.length,r=n(`${t}Duration`).map((c,f)=>Z(c)+Z(s[f%u])),o=Math.max.apply(null,r);return{count:r.length,timeout:o}}function bt(e){const{timeouts:t}=e;return v.useMemo(()=>{const n={};if(_(t))return n;const s=Tt(t);return n[w]=s?t:t.appear,n[d]=s?t:t.enter,n[g]=s?t:t.exit,n},[t])}function yt(e,t,n,s){const{when:u,type:r,unmountOnExit:o,addEndListener:c,onEnter:f,onEntering:h,onEntered:p,onEnterCancel:C,onExit:I,onExiting:V,onExited:$,onExitCancel:P}=e,it=bt(e),X=(a,i)=>{s.finishTransition(i,o);const{from:m,active:x,to:A,done:T}=t[i];s.delTransitionClass(a,m,x,A),s.addTransitionClass(a,T),E(i)?$==null||$(a):p==null||p(a,R(i))},ut=(a,i)=>{Nt(n.status)&&(s.runFinishCleanup(),E(i)?P==null||P(a):C==null||C(a,R(i)),s.cancelTransition(i))},ot=(a,i)=>{const m=()=>{X(a,i)},x=dt=>{dt.target===a&&X(a,i)},A=vt(a),T=k(A,"transition"),F=k(A,"animation"),N=it[i];return T.timeout<=0&&F.timeout<=0?S(M(N,0),m):r==="transition"&&T.timeout>0?D(y(a,"transitionend",O(T.count,x)),S(M(N,T.timeout),m)):r==="animation"&&F.timeout>0?D(y(a,"animationend",O(F.count,x)),S(M(N,F.timeout),m)):T.timeout>F.timeout?D(y(a,"transitionend",O(T.count,x)),S(M(N,T.timeout),m)):D(y(a,"animationend",O(F.count,x)),S(M(N,F.timeout),m))},ct=(a,i)=>{const{active:m,from:x,to:A}=t[i],T=B(()=>{s.startTransition(i),s.clearTransitionClass(a),s.addTransitionClass(a,x),E(i)?I==null||I(a):f==null||f(a,R(i)),s.addTransitionClass(a,m)}),F=Et(()=>{s.delTransitionClass(a,x),s.addTransitionClass(a,A),E(i)?V==null||V(a):h==null||h(a,R(i)),s.setFinishCleanup(ot(a,i))});return()=>{T(),F(),ut(a,i)}},lt=(a,i)=>{s.finishTransition(i,o),E(i)?$==null||$(a):p==null||p(a,R(i))},ft=(a,i)=>{if(c)return c(a,i,()=>{lt(a,i)})},mt=(a,i)=>{const m=B(()=>{s.startTransition(i),s.setFinishCleanup(ft(a,i))});return()=>{m(),s.runFinishCleanup()}},j=gt((a,i)=>(c?mt:ct)(a,i));K(()=>()=>{s.resetTransition()},[s]),K(()=>{const{instance:a,isInitial:i}=n;i&&s.setIsInitial(!1);const m=s.shouldTransition(i,u);if(!(_(m)||!a))return tt?Ct(()=>j(a,m)):j(a,m)},[u,n,s,j])}class Dt{constructor(t,n){l(this,"finishCleanup");l(this,"hasMounted",!1);l(this,"instance",null);l(this,"isInitial",!0);l(this,"isMounted",!1);l(this,"extraValues",{classes:[],style:{}});const{appear:s,mountOnEnter:u,unmountOnExit:r,when:o}=t;this.isMounted=o||!(r||u),this.status=!o||s?H:U,this.step=o?s?w:d:g,this.extraValues.classes=[n[b(this.status)?g:d].done],this.initialValues={isInitial:!0,status:this.status,step:this.step}}}class Ot{constructor(t,n){l(this,"setFinishCleanup",t=>{this.states.finishCleanup=t});l(this,"runFinishCleanup",()=>{var t,n;(n=(t=this.states).finishCleanup)==null||n.call(t),this.states.finishCleanup=void 0});l(this,"setInstance",t=>{this.states.instance=t});l(this,"setIsInitial",t=>{this.states.isInitial=t});l(this,"setIsMounted",t=>{const n=this.states.isMounted!==t;return n&&this.forceUpdate(),this.states.isMounted=t,n});l(this,"markHasMounted",()=>{this.states.hasMounted=!0});l(this,"updateStatus",t=>{this.states.status=t});l(this,"updateStep",t=>{this.states.step=t});l(this,"addTransitionClass",(()=>{var t=this;return function(n){for(var s=arguments.length,u=new Array(s>1?s-1:0),r=1;r<s;r++)u[r-1]=arguments[r];wt(n,...u),t.states.extraValues.classes=t.states.extraValues.classes.concat(u)}})());l(this,"delTransitionClass",(()=>{var t=this;return function(n){for(var s=arguments.length,u=new Array(s>1?s-1:0),r=1;r<s;r++)u[r-1]=arguments[r];W(n,...u);const o=new Set(u);t.states.extraValues.classes=t.states.extraValues.classes.filter(c=>!o.has(c))}})());l(this,"clearTransitionClass",t=>{W(t,...this.states.extraValues.classes),this.states.extraValues.classes=[]});l(this,"shouldTransition",(t,n)=>{const{status:s}=this.states;if(t&&n&&b(s))return w;if(!t&&n&&b(s))return d;if(!t&&!n&&rt(s))return g});l(this,"startTransition",t=>{this.updateStep(t),this.updateStatus(E(t)?st:nt)});l(this,"cancelTransition",t=>{this.updateStep(E(t)?d:g),this.updateStatus(E(t)?H:U)});l(this,"finishTransition",(t,n)=>{this.runFinishCleanup(),this.setIsMounted(!(n&&E(t))),this.updateStatus(E(t)?H:U)});l(this,"resetTransition",()=>{Object.entries(this.states.initialValues).forEach(t=>{let[n,s]=t;this.states[n]=s})});this.forceUpdate=t,this.states=n}}function Lt(e,t){const{mountOnEnter:n,unmountOnExit:s,when:u}=e,r=At(),o=$t(()=>new Dt(e,t)),c=v.useMemo(()=>new Ot(r,o),[o,r]),f=Y(`${s}-${n}`,()=>{if(!b(o.status))return!1;const p=!(s||n&&!o.hasMounted);return c.setIsMounted(p)}),h=Y(u,()=>c.setIsMounted(!0));return{returnEarly:f||h,actions:c,states:o}}function Ut(e,t){const n=e;return n&&(n.$set||(n.$set=(s,u,r)=>{n.style.setProperty(s,u,r),t[J(s)]=u}),n.$remove||(n.$remove=s=>{n.style.removeProperty(s),delete t[J(s)]}),n)}function Ht(e,t){const{children:n}=e,s=St(e),{returnEarly:u,actions:r,states:o}=Lt(e,s);if(Rt(t,o),yt(e,s,o,r),u||!o.isMounted)return null;const c=p=>{const C=Ut(p,o.extraValues.style);xt(C,n.ref),r.setInstance(C),C&&r.markHasMounted()},f=L(n),h=f?{}:{ref:c};return h.className=Ft(f?null:n.props.className,o.extraValues.classes),h.style={...f?null:n.props.style,...o.extraValues.style},f?n(c,h):v.cloneElement(n,h)}var qt=v.forwardRef(Ht);export{qt as C,$t as a,D as b,Y as c,M as f,tt as i,O as r,Mt as s,At as u};
