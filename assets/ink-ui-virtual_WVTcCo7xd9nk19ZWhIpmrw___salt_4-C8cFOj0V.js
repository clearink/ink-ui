import{r as c,g as it,j as p}from"./index-DCi0LQqD.js";import{h as w,a as O,e as S,d as ee,i as $,j as q,m as at,k as L,g as Z,r as G,l as N,n as H,p as ze,q as ae,w as A,s as oe,o as z,t as ot,v as Ue,f as Te,x as lt,c as R,u as B,D as xe,S as ke,y as ut,z as ct,A as ht,E as dt,F as le,G as ft,H as mt}from"./index-DdocyDJ_.js";import{n as W}from"./noop-DX6rZLP_.js";import{p as ne,f as pt}from"./flatten-children-D1QXc7RB.js";function Se(r,e){const t={};for(let s=0,n=e.length;s<n;s++){const i=e[s];i in r&&(t[i]=r[i])}return t}function fe(r,e){const t=r.indexOf(e);return t>-1&&r.splice(t,1),r}function I(r,e=!1){return w(r)?[]:O(r)?r:e?[]:[r]}function gt(r){r()}const X=["xxl","xl","lg","md","sm","xs"],Ft={lg:{mode:"min",size:992},md:{mode:"min",size:768},sm:{mode:"min",size:576},xl:{mode:"min",size:1200},xs:{mode:"max",size:575},xxl:{mode:"min",size:1600}},_t=X.reduce((r,e)=>(r[e]=!0,r),{}),Me=Object.entries(Ft).reduce((r,[e,{mode:t,size:s}])=>{const n=`(${t}-width: ${s}px)`;return r.set(n,e)},new Map);class vt{constructor(){this.dispatch=e=>{const t=Me.get(e.media);t&&this.matches[t]!==e.matches&&(this.matches[t]=e.matches,this.listeners.forEach(s=>s({...this.matches})))},this.listeners=new Set,this.matches={..._t},this.queryList=[],this.register=()=>{!window||!S(window.matchMedia)||Me.forEach((e,t)=>{const s=window.matchMedia(t);s.addEventListener("change",this.dispatch),this.matches[e]=s.matches,this.queryList.push(s)})},this.unregister=()=>{this.queryList.forEach(e=>{e.removeEventListener("change",this.dispatch)}),this.queryList=[]},this.getCurrentMatches=()=>({...this.matches}),this.subscribe=e=>(this.listeners.size||this.register(),this.listeners.add(e),e({...this.matches}),()=>{this.listeners.delete(e),this.listeners.size||this.unregister()})}}const je=new vt;function yt(r){const[e,t]=c.useState(je.getCurrentMatches),s=ee(n=>{($(r)||r(n))&&t(n)});return c.useEffect(()=>je.subscribe(s),[s]),e}function me(r,e){for(let t=0;t<X.length;t+=1){const s=X[t];if(!(!r[s]||!q(e,s)))return e[s]}}function $t(r=""){let e=0;return()=>`${r}${e++}`}function _e(){const r=c.useRef(!1);return c.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),c.useCallback(()=>r.current,[])}function wt(r,e){let t=()=>{};function s(...n){t(),t=at(e,()=>{r.apply(this,n)})}return[s,()=>{t()}]}function Ae(r,e){const t=ee(e),[s,n]=c.useMemo(()=>wt(t,r),[t,r]);return c.useEffect(()=>n,[n]),s}function Ne(r,e){const[t,s]=c.useState(e),n=_e(),i=Ae(r,()=>{n()&&s(e)});return c.useEffect(i,[i,e]),t}function Et(r,e){const[t,s]=c.useState(e),n=Ae(r,s);return[t,n]}var bt=typeof Element<"u",It=typeof Map=="function",Vt=typeof Set=="function",Ct=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function ie(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){if(r.constructor!==e.constructor)return!1;var t,s,n;if(Array.isArray(r)){if(t=r.length,t!=e.length)return!1;for(s=t;s--!==0;)if(!ie(r[s],e[s]))return!1;return!0}var i;if(It&&r instanceof Map&&e instanceof Map){if(r.size!==e.size)return!1;for(i=r.entries();!(s=i.next()).done;)if(!e.has(s.value[0]))return!1;for(i=r.entries();!(s=i.next()).done;)if(!ie(s.value[1],e.get(s.value[0])))return!1;return!0}if(Vt&&r instanceof Set&&e instanceof Set){if(r.size!==e.size)return!1;for(i=r.entries();!(s=i.next()).done;)if(!e.has(s.value[0]))return!1;return!0}if(Ct&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(e)){if(t=r.length,t!=e.length)return!1;for(s=t;s--!==0;)if(r[s]!==e[s])return!1;return!0}if(r.constructor===RegExp)return r.source===e.source&&r.flags===e.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===e.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===e.toString();if(n=Object.keys(r),t=n.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,n[s]))return!1;if(bt&&r instanceof Element)return!1;for(s=t;s--!==0;)if(!((n[s]==="_owner"||n[s]==="__v"||n[s]==="__o")&&r.$$typeof)&&!ie(r[n[s]],e[n[s]]))return!1;return!0}return r!==r&&e!==e}var xt=function(e,t){try{return ie(e,t)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const ve=it(xt);function ye(r,e){const t=L(()=>({deps:e,value:r()}));return c.useMemo(()=>{ve(t.deps,e)||(t.deps=e,t.value=r())},[e,r,t]),t.value}const ge=Z({register:()=>W,triggerFormChange:W,triggerFormFinish:W}),v=()=>{},K=Z({getFieldError:v,getFieldValue:v,getFieldsError:v,getFieldsValue:v,getInternalHooks:()=>({dispatch:v,ensureInitialized:v,getControl:v,metaUpdate:v,registerField:v,registerSubscribe:v,registerWatch:v,setFields:v,setInitialValues:v,setInternalFormMisc:v,setPreserve:v,subscribe:v}),isFieldTouched:v,isFieldValidating:v,isFieldsTouched:v,isFieldsValidating:v,resetFields:v,setFieldValue:v,setFieldsValue:v,submitForm:v,validateField:v,validateFields:v});function ue(r){return I(r).reduce((e,t)=>`${e}_${G(t)}:${t}`,"")}function kt(r,...e){const t=r.length;return e.every(s=>s<t&&s>=0)}function Re(r,e,t){if(!e.length)return t;const[s,...n]=e;let i={};return N(r)?i={...r}:O(r)?i=r.concat():H(s)&&(i=[]),i[s]=Re(i[s],n,t),i}function Pe(r,e,t){return N(r)?Re(r,e,t):r}function U(r,e){const t=e.length;for(let s=0;s<t;s++){if(w(r))return r;r=r[e[s]]}return t?r:void 0}function Be(r,e){if(!e.length)return r;const[t,...s]=e;return q(r,t)&&(s.length?Be(r[t],s):delete r[t]),r}function St(r,e){return N(r)?Be(r,e):r}function De(r,e,t=new WeakMap){if(G(r)!==G(e)||!N(r))return e;if(t.has(r))return t.get(r);if(O(r))return e;if(!N(r))return r;const s={...r};return t.set(r,s),Object.entries(e).reduce((n,[i,a])=>(n[i]=De(n[i],a,t),n),s)}function Mt(r,...e){const t=O(r)?r.concat():{...r};return e.reduce((s,n)=>De(s,n),t)}function We(r,e){if(!N(r)||!e.length)return r;const[t,...s]=e,n=O(r)?[]:{};return n[t]=We(r[t],s),n}function jt(r,e){const t=e.length;for(let s=0;s<t;s++){const n=e[s];if(!q(r,n))return!1;r=r[n]}return!!t}class Nt{constructor(e,t,s){this._reset=t,this.mounted=s,this._dirty=!1,this._errors=[],this._key="",this._name=[],this._props={},this._touched=!1,this._validating=!1,this._warnings=[],this.lastValidate=null,this.metaUpdate=n=>{const i=this.meta;!w(n.dirty)&&(this._dirty=n.dirty),!w(n.touched)&&(this._touched=n.touched),!w(n.errors)&&(this._errors=n.errors),!w(n.warnings)&&(this._warnings=n.warnings),!w(n.validating)&&(this._validating=n.validating),this.lastValidate=this._validating?Promise.resolve([]):null;const a=this.meta,o=this.mounted();if(ve(i,a)&&o)return;const{children:l,onMetaChange:u}=this._props;u==null||u({...a,mounted:o}),S(l)&&this.forceUpdate()},this.reset=()=>{this.metaUpdate({dirty:!1,errors:[],touched:!1,validating:!1,warnings:[]}),this.lastValidate=null,this.mounted()&&this._reset()},this.setGetInitial=n=>{this._getInitial=n},this.setInternalFieldProps=n=>{this._props=n,this._shouldHook=n.shouldUpdate,this._name!==n.name&&(this._key=ue(n.name),this._name=n.name||[])},this.shouldUpdate=(n,i,a)=>{const{_key:o,_name:l,_shouldHook:u}=this;return $(u)&&o?U(n,l)!==U(i,l):S(u)?u(n,i,a):!!u},this.validate=async(n,i)=>{const{rule:a}=this._props;if(!this._touched||!a||!this._key)return;const o=a.validate(n,i);return this.lastValidate=o,o.then(()=>{}).catch(l=>l).then((l={})=>{if(this.lastValidate!==o)return;const{issues:u=[]}=l,d=u.map(h=>h.message);this.metaUpdate({errors:d,validating:!1})})},this.forceUpdate=()=>s()&&e()}get dirty(){var e;return this._dirty||!$(this._props.initialValue)?!0:!$((e=this._getInitial)==null?void 0:e.call(this))}get meta(){return{dirty:this.dirty,errors:this._errors,name:this._name,touched:this._touched,validating:this._validating,warnings:[]}}}class Pt{constructor(e){this._errors=[],this._props={},this._warnings=[],this._name=I(e)}}const te=Symbol.for("_$ink$_");class Ot{constructor(e){this.forceUpdate=e,this._getInternalHooks=t=>{if(!(t===te))return;const{$controls:n,$dispatch:i,$initial:a,$props:o}=this,{$dependencies:l,$watch:u}=i;return{dispatch:i.dispatch,ensureInitialized:a.ensureInitialized,metaUpdate:n.metaUpdate,registerField:i.registerField,registerWatch:u.registerWatch,setFields:i.setFields,setInitialValues:a.setInitialValues,setInternalFormMisc:o.setInternalFormMisc,subscribe:l.subscribe}},this.injectForm=()=>{const{$controls:t,$dispatch:s,$state:n}=this;return{getFieldError:t.getFieldError,getFieldValue:n.getFieldValue,getFieldsError:t.getFieldsError,getFieldsValue:n.getFieldsValue,getInternalHooks:this._getInternalHooks,isFieldTouched:t.isFieldTouched,isFieldValidating:t.isFieldValidating,isFieldsTouched:t.isFieldsTouched,isFieldsValidating:t.isFieldsValidating,resetFields:s.resetFields,setFieldValue:s.setFieldValue,setFieldsValue:s.setFieldsValue,submitForm:s.submitForm,validateField:s.validateField,validateFields:s.validateFields}},this.$props=new Lt(e),this.$controls=new Tt(this.$props),this.$state=new At(this.$controls),this.$initial=new Ut(this.$state),this.$dispatch=new Rt(this.$props,this.$controls,this.$state,this.$initial)}}class Lt{constructor(e){this.forceUpdate=e,this._props={},this.setInternalFormMisc=(t,s)=>{this._parent=s,this._props=t}}get useRenderProps(){return S(this._props.children)}}class qt{constructor(){this._dependencies=new Map,this.findDependencies=(e,t)=>{if(!e.length)return;const s=[],n=this._dependencies;e.forEach(i=>{var a;(a=n.get(i._key))==null||a.forEach(o=>{!o.dirty&&!o._touched||t.has(o)||(s.push(o),t.add(o))})}),this.findDependencies(s,t)},this.subscribe=e=>{const{dependencies:t=[]}=e._props,s=e._key,n=this._dependencies,i=t.map(a=>{const o=ue(a);if(!o||s===o)return W;const l=n.get(o)||new Set;return n.set(o,l.add(e)),()=>{l.delete(e),l.size===0&&n.delete(o)}});return()=>i.forEach(a=>a())}}}class zt{constructor(){this._watchList=new Set,this.publishWatch=()=>{this._watchList.forEach(gt)},this.registerWatch=e=>(this._watchList.add(e),()=>{this._watchList.delete(e)})}}class Ut{constructor(e){this.$state=e,this._initial={},this.deleteFieldValue=t=>this.$state.deleteFieldValue(t),this.getFieldValue=t=>this.$state.getFieldValue(t),this.setFieldValue=(t,s)=>this.$state.setFieldValue(t,s),this.ensureInitialized=t=>{const s=t._name,n=t._props.initialValue,i=this.$state.state;if(!t._key)return[i,i];if(!$(this.getFieldValue(s)))return[i,i];const o=this.getInitialValue(s)??n;return $(o)?[i,i]:this.setFieldValue(s,o)},this.getInitialValue=t=>U(this._initial,I(t)),this.initialFieldsValue=t=>{if($(t))return this.deleteFieldValue();const s=this.$state.state;return t.forEach(this.deleteFieldValue),[s,this.$state.state]},this.setInitialValues=t=>{this._initial=t||{}}}}class Tt{constructor(e){this.$props=e,this._controls={list:[],map:new Map},this.pushControl=(t,s)=>{const n=t._key;t.setGetInitial(()=>s.getInitialValue(t._name));const{list:i,map:a}=this._controls;if(ne(i,t),!n)return()=>fe(i,t);const o=a.get(n)??[];return a.set(n,ne(o,t)),()=>{fe(i,t),fe(o,t),!o.length&&a.delete(n)}},this.getControls=(t=!1)=>{const s=this._controls.list;return t?s.filter(n=>n._key):s},this.getControlsByName=(t,s)=>{if($(s))return this.getControls(!0);const n=this._controls.map;return s.reduce((i,a)=>{const o=ue(a),l=n.get(o);return!l&&!t&&i.push(new Pt(a)),l?ne(i,l):i},[])},this.getFieldError=t=>this.getFieldsError([t])[0].errors,this.getFieldsError=t=>this.getControlsByName(!1,t).map(n=>{const{_errors:i,_name:a,_warnings:o}=n;return{errors:i,name:a,warnings:o}}),this.getValidateControls=t=>this.getControlsByName(!0,t).filter(s=>!!s._props.rule),this.isFieldTouched=t=>this.isFieldsTouched([t]),this.isFieldValidating=t=>this.isFieldsValidating([t]),this.isFieldsTouched=t=>this.getControlsByName(!0,t).some(n=>!n._touched),this.isFieldsValidating=t=>this.getControlsByName(!0,t).some(n=>!n._validating),this.metaUpdate=(t,s)=>{this.getControlsByName(!0,[t]).forEach(n=>{n.metaUpdate(s)})},this.registerField=(t,s)=>{const{$initial:n,$state:i,dispatch:a}=s,o=this.pushControl(t,n);return a({control:t,type:"registerField"}),()=>{const{_key:l,_name:u,_props:d}=t;o(),!((d.preserve??this.$props._props.preserve??!0)||d.isListField)&&i.getFieldValue(u)!==n.getInitialValue(u)&&(this._controls.map.has(l)||a({control:t,type:"removeField"}))}}}}class At{constructor(e){this.$controls=e,this._state={},this.cleanupField=t=>(t.metaUpdate({}),this.deleteFieldValue(t._name)),this.deleteFieldValue=t=>{const s=this._state;return $(t)?this._state={}:this._state=St(this._state,I(t)),[s,this._state]},this.getFieldValue=t=>U(this._state,I(t)),this.getFields=t=>this.$controls.getControlsByName(!0,t).map(s=>{const n=s._name,i=this.getFieldValue(n);return{...s.meta,name:n,value:i}}),this.getFieldsValue=t=>{if(t===!0)return this._state;const s=$(t),n=ze(t)?[]:t,i=this.$controls.getControlsByName(!1,n),a=this._state;return i.reduceRight((o,l)=>{const{_name:u,_props:d}=l;return s&&d.isListField||jt(o,u)?o:Pe(o,u,U(a,u))},{})},this.setFieldValue=(t,s)=>{const n=this._state,i=I(t);return i.length?(this._state=Pe(this._state,i,s),[n,this._state]):[n,n]},this.setFieldsData=t=>{const s=this._state;return t.forEach(n=>{q(n,"value")&&this.setFieldValue(n.name,n.value)}),[s,this._state]},this.setFieldsValue=t=>{const s=this._state;return this._state=Mt(this._state,t),[s,this._state]}}get state(){return this._state}}class Rt{constructor(e,t,s,n){this.$props=e,this.$controls=t,this.$state=s,this.$initial=n,this.lastValidate=null,this.$dependencies=new qt,this.$watch=new zt,this.dispatch=i=>{const{$controls:a,$initial:o,$state:l}=this;if(i.type==="fieldEvent"){const{control:u,type:d,value:h}=i,f=u._name,[m,g]=l.setFieldValue(f,h),F=this.updateControl(y=>y.shouldUpdate(m,g,d));return this.triggerOnValuesChange(g,f),this.triggerOnFieldsChange([u].concat(F))}if(i.type==="setFieldsValue"){const{state:u,type:d}=i,[h,f]=l.setFieldsValue(u);return this.updateControl(m=>m.shouldUpdate(h,f,d))}if(i.type==="setFields"){const{fields:u,type:d}=i;u.forEach(m=>a.metaUpdate(m.name,m));const[h,f]=l.setFieldsData(u);return this.updateControl(m=>m.shouldUpdate(h,f,d))}if(i.type==="removeField"){const{control:u,type:d}=i,[h,f]=l.cleanupField(u);return this.updateControl(m=>m.shouldUpdate(h,f,d))}if(i.type==="registerField"){const{control:u,type:d}=i,{initialValue:h}=u._props;if($(h)||l.getFieldValue(u._name)!==h)return;const[f,m]=o.ensureInitialized(u);return this.updateControl(g=>g===u?!1:g._key===u._key?!0:g._shouldHook?g.shouldUpdate(f,m,d):!1)}if(i.type==="resetFields"){const{nameList:u,type:d}=i,h=o.initialFieldsValue(u)[0],f=a.getControlsByName(!0,u);f.forEach(o.ensureInitialized),f.forEach(g=>g.reset());const m=l.state;return this.updateControl(g=>g.shouldUpdate(h,m,d))}},this.publishDependentControl=i=>{const a=new Set;this.$dependencies.findDependencies(i,a);const o=Array.from(a),l=o.map(({_name:u})=>u);return l.length>0&&this.validateFields(l),o},this.registerField=i=>(i._shouldHook===!0&&i.forceUpdate(),this.$controls.registerField(i,this)),this.resetFields=i=>{this.dispatch({nameList:i,type:"resetFields"})},this.setFieldValue=(i,a)=>{this.dispatch({fields:[{name:i,value:a}],type:"setFields"})},this.setFields=i=>{this.dispatch({fields:i,type:"setFields"})},this.setFieldsValue=i=>{this.dispatch({state:i,type:"setFieldsValue"})},this.submitForm=()=>{this.validateFields().then(this.triggerOnFinish,this.triggerOnFailed)},this.triggerOnFailed=i=>{var a,o;(o=(a=this.$props._props).onFailed)==null||o.call(a,i)},this.triggerOnFieldsChange=i=>{const{name:a,onFieldsChange:o}=this.$props._props,l=this.$props._parent;if(!o&&!l)return;const{getFields:u}=this.$state,d=i.map(f=>f._name),h=u(d);!$(a)&&(l==null||l.triggerFormChange(a,h)),o==null||o(h,()=>u())},this.triggerOnFinish=i=>{const{onFinish:a}=this.$props._props;if(!(!a||i==="invalid-validate"))try{a(i)}catch(o){console.error(o)}},this.triggerOnValuesChange=(i,a)=>{const{onValuesChange:o}=this.$props._props;if(!o)return;const l=We(i,a);o(l,()=>this.$state.getFieldsValue())},this.updateControl=i=>{const a=this.$controls.getControls().filter(i);return this.$props.useRenderProps?this.$props.forceUpdate():a.forEach(o=>o.forceUpdate()),this.$watch.publishWatch(),this.publishDependentControl(a)},this.validateField=i=>this.validateFields([i]),this.validateFields=i=>{const{getFieldValue:a,getFieldsValue:o}=this.$state,{getFieldsError:l,getValidateControls:u}=this.$controls,d=u(i),h=d.map(g=>{const F=g._name;return g.metaUpdate({errors:[],touched:!0,validating:!0,warnings:[]}),g.validate(a(F),{path:F})});this.triggerOnFieldsChange(d);const f=Promise.all(h);this.lastValidate=f;const m=f.then(()=>{if(f!==this.lastValidate)return"invalid-validate";const g=l(i).filter(({errors:y})=>y.length);this.triggerOnFieldsChange(d);const F=o(i);return g.length?Promise.reject({errorFields:g,values:F}):F});return m.catch(g=>g),m}}}function Bt(){const r=_e(),[e,t]=c.useReducer(i=>i+1,0),s=ae();return[L(()=>new Nt(s,t,r)),e]}function Dt(r,e,t){return function s(n){if(S(n)){const a=n(r(),t.meta,e);return{...s(a),functional:!0}}const i=pt(n);return i.length===1&&c.isValidElement(i[0])?{children:i[0],valid:!0}:{children:i,valid:!1}}}function Wt(r){return e=>!e||!N(e.target)||!q(e.target,r)?e:e.target[r]}function Gt(r){return e=>({[r]:e})}function Ht(r,e,t,s){const{formatter:n,getValueFromEvent:i,getValueProps:a,name:o,rule:l,trigger:u,validateTrigger:d}=A(r,{getValueFromEvent:Wt(r.valuePropName),getValueProps:Gt(r.valuePropName)});return(h={})=>{if(!t._key)return h;const f=e.getFieldValue(o),m={...h,...a(f),[u]:(...F)=>{var b;let y=i(...F);S(n)&&(y=n(y,f,()=>e.getFieldsValue())),s==null||s.metaUpdate(o,{dirty:!0,touched:!0}),s==null||s.dispatch({control:t,type:"fieldEvent",value:y}),u&&((b=h[u])==null||b.call(h,...F))}};return I(d??e.validateTrigger).reduce((F,y)=>(y===!1||(F[y]=(...b)=>{var x;(x=m[y])==null||x.call(m,...b),l&&e.validateField(o)}),F),{...m})}}function Kt(r,e,t,s){const n=Ht(r,e,t,s),i=Dt(n,e,t),{children:a,functional:o,valid:l}=i(r.children);if(o||!l)return a;const u=n(a.props);return c.cloneElement(a,u)}const Zt={trigger:"onChange",valuePropName:"value"};function Jt(r){const e=A(r,Zt),{rule:t,dependencies:s}=e,n=K.useState(),i=c.useMemo(()=>n.getInternalHooks(te),[n]),[a,o]=Bt();c.useMemo(()=>{a.setInternalFieldProps(e)},[a,e]),L(()=>i.ensureInitialized(a)),c.useEffect(()=>i.registerField(a),[a,i]);const l=ye(()=>s,[s]);c.useEffect(()=>i.subscribe(a),[a,i,l]),oe(t,(d,h)=>{!d&&h&&a.metaUpdate({errors:[],warnings:[]})});const u=Kt(e,n,a,i);return p.jsx(c.Fragment,{children:u},o)}function Ge(r){const{isListField:e,name:t}=r,{listPath:s=[]}=K.useState(),n=$(t)?[]:s.concat(I(t)),i=e?"keep":ue(n);return p.jsx(Jt,{...r,name:n},i)}function He(r){const e=_e(),t=ae();return L(()=>{const s=()=>e()&&t();return r||new Ot(s).injectForm()})}const Qt={preserve:!0,tag:"form",validateTrigger:"onChange"},Xt=["name","tag","form","children","onReset","initialValues","validateTrigger","preserve","validationSchema","fields","onFinish","onFieldsChange","onValuesChange","onFailed"];function Yt(r,e){const t=A(r,Qt),{children:s,fields:n,form:i,initialValues:a,name:o,onReset:l,tag:u,validateTrigger:d}=t,h=He(i),f=ge.useState();c.useImperativeHandle(e,()=>h,[h]);const m=c.useMemo(()=>h.getInternalHooks(te),[h]);c.useMemo(()=>{m.setInternalFormMisc(t,f)},[m,f,t]),L(()=>m.setInitialValues(a)),c.useEffect(()=>f.register(h,o),[h,o,f]),oe(n,{compare:ve,listener:()=>{n&&m.setFields(n)}});const g=E=>{E==null||E.preventDefault(),E==null||E.stopPropagation(),h.submitForm()},F=E=>{E==null||E.preventDefault(),E==null||E.stopPropagation(),h.resetFields(),l==null||l(E)},y=c.useMemo(()=>({...h,formName:o,validateTrigger:d}),[h,d,o]),b=p.jsx(K.Provider,{value:y,children:S(s)?s(h.getFieldsValue(!0),h):s});if(w(u))return b;const x={...z(t,Xt),onReset:F,onSubmit:g};return c.createElement(u,x,b)}const es=c.forwardRef(Yt);function Ke(r,e){const[t,s]=c.useState(),n=K.useState(),i=e??n,a=c.useMemo(()=>i==null?void 0:i.getInternalHooks(te),[i]),o=ye(()=>I(r),[r]),l=ee(()=>a==null?void 0:a.registerWatch(()=>{const u=i==null?void 0:i.getFieldValue(o);ot(u,t)||s(u)}));return c.useEffect(l,[l,o]),t}class ts{constructor(){this._context=null,this._id=0,this._keys=[],this._listPath=[],this._rule=void 0,this.append=e=>{this._keys=this._keys.concat(this._id),this.dispatchEvent(this.getFieldList().concat(e)),this._id+=1},this.dispatchEvent=e=>{var s,n;const t=(s=this._context)==null?void 0:s.getInternalHooks(te);t==null||t.dispatch({fields:[{name:this._listPath,value:e}],type:"setFields"}),this._rule&&((n=this._context)==null||n.validateFields([this._listPath]))},this.getFieldList=()=>{var t;const e=(t=this._context)==null?void 0:t.getFieldValue(this._listPath);return I(e)},this.insert=(e,t)=>{const s=this.getFieldList().concat();s.splice(e,0,t),this._keys.splice(e,0,this._id),this.dispatchEvent(s),this._id+=1},this.move=(e,t)=>{const s=this.getFieldList().concat();kt(s,e,t)&&(s.splice(t,0,s.splice(e,1)[0]),this._keys.splice(t,0,this._keys.splice(e,1)[0]),this.dispatchEvent(s))},this.prepend=e=>{this._keys=[this._id,...this._keys],this.dispatchEvent([e].concat(this.getFieldList())),this._id+=1},this.remove=e=>{const t=new Set(I(e)),s=(i,a)=>t.size===0?!1:!t.has(a),n=this.getFieldList();this._keys=this._keys.filter(s),this.dispatchEvent(n.filter(s))},this.replace=(e,t)=>{const s=this.getFieldList();s[e]=t,this.dispatchEvent(s)},this.swap=(e,t)=>{const s=this.getFieldList();[s[e],s[t]]=[s[t],s[e]];const n=this._keys;[this._keys[e],this._keys[t]]=[n[t],n[e]],this.dispatchEvent(s)},this.ensureFieldKey=e=>{const t=this._keys[e];return $(t)&&(this._keys[e]=this._id,this._id+=1),this._keys[e]},this.getFeatures=()=>({append:this.append,insert:this.insert,move:this.move,prepend:this.prepend,remove:this.remove,replace:this.replace,swap:this.swap}),this.setInternalFormListMisc=(e,t,s)=>{this._context=e,this._listPath=t,this._rule=s}}}function Ze(r){const{children:e,initialValue:t,name:s,preserve:n,rule:i}=r,a=K.useState(),o=ye(()=>I(a.listPath).concat(I(s)),[a.listPath,s]),l=c.useMemo(()=>({...a,listPath:o}),[a,o]),u=L(()=>new ts);u.setInternalFormListMisc(a,o,i);const d=c.useMemo(()=>u.getFeatures(),[u]);return S(e)?p.jsx(K.Provider,{value:l,children:p.jsx(Ge,{initialValue:t,name:[],preserve:n,rule:i,shouldUpdate:(f,m,g)=>{const F=I(s),y=U(f,F),b=U(m,F);return g!=="setFields"&&g!=="fieldEvent"?y!==b:G(y)!==G(b)?!0:O(b)&&y.length!==b.length},children:({value:f},m)=>{const g=I(f,!0).map((F,y)=>({isListField:!0,key:u.ensureFieldKey(y),name:y}));return e(g,d,m)}})}):null}function ss(r){const e=c.useRef({}),t=ge.useState(),s=c.useMemo(()=>({register:Ue(t.register,(n,i)=>i?(e.current[i]=n,()=>{delete e.current[i]}):W),triggerFormChange:t.triggerFormChange,triggerFormFinish:t.triggerFormFinish}),[t]);return p.jsx(ge.Provider,{value:s,children:r.children})}const ce=Object.assign(es,{Field:Ge,List:Ze,Provider:ss,useForm:He,useWatch:Ke});function rs(r,e){return r===e?!0:!c.isValidElement(r)||!c.isValidElement(e)?!1:r.key===e.key&&r.type===e.type}function ns(r,e){return r.length!==e.length?!1:r.every((t,s)=>rs(t,e[s]))}function is(r,e){const t=new Set,s=new Set;c.Children.forEach(r,a=>{t.add(a.key)}),c.Children.forEach(e,a=>{s.add(a.key)});const n=new Set,i=new Set;return s.forEach(a=>{t.has(a)||n.add(a)}),t.forEach(a=>{s.has(a)||i.add(a)}),[n,i]}function as(r,e,t){const s=new Map,n=[],i=new Map;r.forEach(o=>{i.set(o.key,o)}),c.Children.forEach(t,(o,l)=>{if(s.has(o.key))throw new Error(`two children with the same key, '${o.key}'. `);const u=e.has(o.key)?o:i.get(o.key);s.set(o.key,l),n.push(u)});let a=-1;return r.forEach(o=>{const l=Te(s.get(o.key),-1);l<0?n.splice(++a,0,o):a<l&&(a=l)}),n}function os(r){return q(r,"node")&&q(r,"freeze")}const Oe=["children","onFinished","when","unmountOnExit"];class ls{constructor(e){this._props=e,this.components=new Map,this.current=[],this.elements=[],this.current=e.children}}class us{constructor(e,t){this.forceUpdate=e,this.states=t,this.uniqueId=$t("gt-"),this.makeElement=(s,n)=>{const i=s.key,a=z(this._props,Oe);return Object.assign(a,n,{ref:l=>{l?this.components.set(i,l):this.components.delete(i)},key:this.uniqueId(),when:!0,unmountOnExit:!0}),{freeze:!1,node:c.createElement(lt,a,s),key:i}},this.cloneElement=({node:s,key:n},i)=>{const a=z(this._props,Oe);return Object.assign(a,{onExited:Ue(a.onExited,this.handleFinished)}),i&&(a.when=!1),{freeze:i,node:c.cloneElement(s,a),key:n}},this.setInnerProps=s=>{this.states._props=s},this.setCurrent=s=>{this.states.current=s},this.setElements=s=>{const n=new Map;s.forEach(i=>{n.set(i.node.key,i)}),this.states.elements=Array.from(n.values())},this.handleFinished=()=>{var n,i;let s=!0;this.setElements(this.elements.filter(a=>{const o=this.components.get(a.key);return o?(o.isExiting&&(s=!1),!o.isExited):!1})),s&&((i=(n=this._props).onFinished)==null||i.call(n)),s&&this.forceUpdate()},this.updateElements=()=>{const{children:s}=this._props,[n,i]=is(this.states.current,s),o=as(this.elements,n,s).reduce((l,u)=>(l.push(os(u)?this.cloneElement(u,i.has(u.key)):this.makeElement(u,{appear:!0})),l),[]);this.setElements(o),this.setCurrent(s),this.forceUpdate()},this.renderNodes=s=>{const n=new Map;return c.Children.forEach(s,i=>{n.set(i.key,i)}),this.elements.map(i=>{const a=n.get(i.key);return i.freeze||!a||a!==i.node.props.children&&(i.node=c.cloneElement(i.node,void 0,a)),i.node})},t.elements=[],c.Children.forEach(t.current,s=>{t.elements.push(this.makeElement(s))})}get _props(){return this.states._props}get elements(){return this.states.elements}get components(){return this.states.components}}function cs(r){const e=ae(),t=L(()=>new ls(r)),s=c.useMemo(()=>new us(e,t),[e,t]);return c.useMemo(()=>{s.setInnerProps(r)},[s,r]),{actions:s,states:t}}function hs(r,e){const{children:t}=r,{actions:s,states:n}=cs(r);return c.useImperativeHandle(e,()=>({get components(){return n.components}}),[n]),oe(t,()=>ns(n.current,t)?!1:(s.updateElements(),!0))?null:p.jsx(p.Fragment,{children:s.renderNodes(t)})}const ds=c.forwardRef(hs),Je=Z(0),fs=/^\d+(\.\d+)?(px|r?em|%)$/;function ms(r){return c.useMemo(()=>{if($(r))return r;if(H(r))return`${r} ${r} auto`;if(fs.test(r))return`0 0 ${r}`},[r])}function ps(r,e){const{className:t,offset:s,order:n,pull:i,push:a,span:o}=e;return c.useMemo(()=>{const l=X.reduce((u,d)=>{const h=e[d];return $(h)?u:N(h)?(u[`${r}-${d}-${h.span}`]=h.span,u[`${r}-${d}-${h.offset}`]=h.offset,u[`${r}-${d}-${h.pull}`]=h.pull,u[`${r}-${d}-${h.push}`]=h.push,u[`${r}-${d}-${h.order}`]=h.order,u):(u[`${r}-${d}-${h}`]=h,u)},{});return R(r,l,{[`${r}-${o}`]:!$(o),[`${r}-offset-${s}`]:s,[`${r}-order-${n}`]:n,[`${r}-pull-${i}`]:i,[`${r}-push-${a}`]:a},t)},[t,s,n,r,e,i,a,o])}const gs=["children","style","flex","span","offset","order","pull","push",...X];function Fs(r,e){const{children:t,style:s}=r,n=B("col"),i=ps(n,r),a=Je.useState()/2,o=a?{paddingLeft:a,paddingRight:a}:void 0,l=ms(r.flex),u=z(r,gs);return p.jsx("div",{...u,ref:e,className:i,style:{flex:l,...o,...s},children:t})}const Qe=c.forwardRef(Fs);function pe(r,e,t){return e.map((s,n)=>({key:c.isValidElement(s)?`${s.key}-${s.type}-${r}-${n}`:`${s}-${G(s)}`,status:Te(t,r),value:s}))}function _s(r){const{help:e,helpStatus:t,errors:s,warnings:n}=r,i=Ne(40,s||[]),a=Ne(40,n||[]);return c.useMemo(()=>w(e)?ne(pe("error",i),pe("warning",a)):pe("help",[e],t),[i,e,t,a])}const vs={onEnter:r=>{r.$set("height","0px")},onEntering:r=>{r.$set("height",`${r.scrollHeight}px`)},onEntered:r=>{r.$remove("height")},onEnterCancel:r=>{r.$set("height",`${r.offsetHeight}px`)},onExit:r=>{r.$set("height",`${r.offsetHeight}px`)},onExiting:r=>{r.$set("height","0px")},onExited:r=>{r.$remove("height")},onExitCancel:r=>{r.$set("height",`${r.offsetHeight}px`)}};function Xe(r){const{className:e,onFinished:t}=r,s=B("form-item-message"),n=_s(r);return p.jsx("div",{className:R(s,e),children:p.jsx(ds,{appear:!0,classNames:`${s}-motion`,...vs,onFinished:t,children:n.map(i=>p.jsx("div",{className:`${s}--${i.status}`,children:i.value},i.key))})})}const J=Z({labelAlign:"right",layout:"horizontal"}),Ye=Z({}),et=Z(W);function tt(r){const e=ce.useForm();return c.useMemo(()=>r??{...e,scrollToField:t=>{console.log(t)}},[e,r])}function ys(r,e){const{className:t,layout:s,requiredMark:n,size:i}=e;return R(r,{[`${r}--${s}`]:s,[`${r}--${i}`]:i,[`${r}--hide-required-mark`]:!n},t)}const $s={colon:!0,layout:"horizontal",requiredMark:!0},ws=["form","colon","layout","labelAlign","labelWrap","labelCol","wrapperCol","size","disabled","scrollToFirstError","requiredMark"];function Es(r,e){const t=A(r,{...$s,disabled:xe.useState(),size:ke.useState()}),{colon:s,disabled:n,form:i,labelAlign:a,labelCol:o,labelWrap:l,layout:u,name:d,onFailed:h,requiredMark:f,scrollToFirstError:m,size:g,wrapperCol:F}=t,y=B("form"),b=ys(y,t),x=tt(i);c.useImperativeHandle(e,()=>x,[x]);const E=c.useMemo(()=>({colon:s,form:x,formName:d,labelAlign:a,labelCol:o,labelWrap:l,layout:u,requiredMark:f,wrapperCol:F}),[s,f,x,a,o,l,u,d,F]),D=ee(nt=>{h==null||h(nt),console.log(m)}),de=z(t,ws);return p.jsx(xe.Provider,{value:n,children:p.jsx(ke.Provider,{value:g,children:p.jsx(J.Provider,{value:E,children:p.jsx(ce,{...de,className:b,form:x,name:d,onFailed:D})})})})}const bs=c.forwardRef(Es);function Is(){return J.useState().form}function Vs(r,e){const{align:t,className:s,justify:n,wrap:i}=e;return R(r,{[`${r}--${t}`]:t,[`${r}--${n}`]:n,[`${r}--wrap`]:i},s)}function Cs(r){const e=O(r)?r:[r,0],t=yt(s=>e.some(n=>{if(H(n))return!1;const i=me(t,n),a=me(s,n);return i!==a}));return e.map(s=>H(s)?s:me(t,s)??0)}const xs={gutter:0,wrap:!0},ks=["children","gutter","align","justify","wrap",...ct];function Ss(r,e){const t=A(r,xs),{children:s,gutter:n}=t,i=B("row"),a=Vs(i,t),o=ut(t),[l,u]=Cs(n),d=c.useMemo(()=>{const f={...o.root};return l&&(d.marginLeft=l/-2),l&&(d.marginRight=l/-2),u&&(d.rowGap=u),f},[o.root,l,u]),h=z(t,ks);return p.jsx("div",{...h,ref:e,className:a,style:d,children:p.jsx(Je.Provider,{value:l,children:s})})}const Ms=c.forwardRef(Ss);function js(r,e,t={}){return R(r,e&&`${r}--has-${e}`,t.className)}function Ns(r,e){return c.useMemo(()=>{const t="";return w(e)?r.validating?"validating":r.errors.length?"error":r.warnings.length?"warning":r.touched?"success":t:e},[r,e])}function Ps(r,e){const{getOuter:t}=r,s=ae(),n=L(()=>({offset:0})),i=u=>{n.offset!==u&&s(),n.offset=u},a=()=>{!e&&i(0)},o=ee(u=>{const d=t();if(!e||!d)return!1;const h=ht(d);return i(Number.parseFloat(h.marginBottom)),u&&s(),u}),l=oe(e,()=>o(!0));return c.useEffect(()=>dt(()=>{o(!1)}),[o]),{returnEarly:l,offset:n.offset,cleanOffset:a}}function Os(){return{dirty:!1,errors:[],mounted:!1,name:[],touched:!1,validating:!1,warnings:[]}}function Le(){const[r,e]=Et(80,Os),t=c.useCallback(s=>{s.mounted&&e(s)},[e]);return[r,t]}function Ls(r){const e=J.useState(),t=A(r,{wrapperCol:e.wrapperCol}),{children:s,extra:n,help:i,validateStatus:a,wrapperCol:o}=t,[l,u]=Le(),[d,h]=Le(),f=Ns(l,a),m=B("form-item__control"),g=js(m,f,o),F=c.useMemo(()=>({validateStatus:f}),[f]),y=c.useMemo(()=>l.errors.concat(d.errors),[l.errors,d.errors]),b=c.useMemo(()=>l.warnings.concat(d.warnings),[l.warnings,d.warnings]),x=!w(i)||!!(y.length||b.length),{returnEarly:E,offset:D,cleanOffset:de}=Ps(t,x);return E?null:p.jsx(Qe,{...o,className:g,children:p.jsxs(Ye.Provider,{value:F,children:[p.jsx("div",{className:`${m}-input`,children:s(u,h)}),!!(x||D)&&p.jsx("div",{className:`${m}-status`,style:{minHeight:D},children:p.jsx(Xe,{errors:y,help:i,helpStatus:f,warnings:b,onFinished:de})}),!w(n)&&p.jsx("div",{className:`${m}-extra`,children:n}),!!D&&p.jsx("div",{className:`${m}-offset`,style:{marginBottom:-D}})]})})}function qs(r,e,t){const{colon:s,labelAlign:n,labelCol:i={},labelWrap:a,required:o,requiredMark:l}=e;return R(r,{[`${r}--${n}`]:n,[`${r}--colon`]:s,[`${r}--has-colon`]:s&&t.layout!=="vertical",[`${r}--required`]:o,[`${r}--required-optional`]:l==="optional",[`${r}--wrap`]:a},i.className)}function zs(r,e){const{colon:t,label:s,required:n,requiredMark:i,tooltip:a}=r,o=e.layout!=="vertical"&&t;let l=s;return o&&le(l)&&(l=l.replace(/[:|：]\s*$/,"")),l}function Us(r){const e=J.useState(),t=A(r,{colon:e.colon,labelAlign:e.labelAlign,labelCol:e.labelCol,labelWrap:e.labelWrap,requiredMark:e.requiredMark}),{htmlFor:s,label:n}=t,i=B("form-item__label"),a=qs(i,t,e),o=le(n)?n:void 0;return p.jsx(Qe,{...t.labelCol,className:a,children:p.jsx("label",{htmlFor:s,title:o,children:zs(t,e)})})}function Ts(r,e){const{className:t,hidden:s}=e;return R(r,s&&`${r}--hidden`,t)}function st(r,e){return c.useMemo(()=>{if(w(r))return;const t=I(r).join("_");return w(e)?t:`${e}_${t}`},[e,r])}function As(r){const{children:e,dependencies:t=[],name:s,shouldUpdate:n}=r,i=I(s).length,a=S(e);return i&&a||n&&t.length||a&&!(n||t.length)||t.length&&!(a||i)?!0:(i&&!a&&!c.isValidElement(e),!1)}function rt(r,e,t){const{children:s}=r;if(As(r))return()=>null;if(S(s))return()=>s(e);if(!c.isValidElement(s))return()=>s;const n=s.props.id;return w(t)||!w(n)?s:c.cloneElement(s,{id:t})}const Rs=["colon","htmlFor","label","labelAlign","labelCol","labelWrap","requiredMark","tooltip"],Bs=["wrapperCol","extra","help","validateStatus"];function Ds(r){const{form:e,formName:t}=J.useState(),s=et.useState(),n=st(r.name,t);return p.jsx(ce.Field,{...r,onMetaChange:s,children:rt(r,e,n)})}function Ws(r){const{label:e,name:t,required:s,style:n}=r,{form:i,formName:a}=J.useState(),o=B("form-item"),l=st(t,a),u=Ts(o,r),d=c.useRef(null),h=c.useCallback(()=>d.current,[]),f=Se(r,Rs),m=Se(r,Bs);return p.jsxs(Ms,{ref:d,className:u,style:n,children:[!w(e)&&p.jsx(Us,{htmlFor:l,required:s,...f}),p.jsx(Ls,{...m,getOuter:h,children:(g,F)=>p.jsx(et.Provider,{value:F,children:p.jsx(ce.Field,{...r,onMetaChange:g,children:rt(r,i,l)})})})]})}function Gs(r){return c.createElement(r.noStyle?Ds:Ws,r)}function Hs(){const{validateStatus:r}=Ye.useState();return r}const qe=Object.assign(bs,{ErrorList:Xe,Item:Object.assign(Gs,{useStatus:Hs}),List:Ze,useForm:tt,useFormInstance:Is,useWatch:Ke}),V=r=>({status:"valid",value:r});function P(r){return(e,t)=>r.abortEarly&&!r.issue.isEmpty?Promise.reject(r.issue):(r.issue.addIssue(e,r.path,t),{status:"invalid"})}function _(r,e,t){return async(s,n)=>await r(s)?V(s):P(n)(e,{value:s,...t})}function Ks(r=[]){return r.reduce((e,t)=>H(t)?`${e}[${t}]`:t.includes(".")?`${e}['${t}']`:e.length?`${e}.${t}`:`${t}`,"")}class T extends TypeError{constructor(){super(...arguments),this.issues=[]}static ensure(e,t){const s=(e==null?void 0:e.path)||[];return{abortEarly:(e==null?void 0:e.abortEarly)??!1,issue:(e==null?void 0:e.issue)??new T,path:w(t)?s:s.concat(t)}}static format(e,t=[]){return(s={})=>{if(S(e))return e({...s,path:t});if(!le(e))return e;const n={...s,path:Ks(t)||"this"};return Object.entries(n).reduce((i,[a,o])=>{const l=new RegExp(`{#${a}}`,"g");return i.replace(l,String(o))},e)}}addIssue(e,t,s){const n=T.format(e,t)(s);this.issues.push({message:n,path:t})}addIssues(e){return this.issues=this.issues.concat(e),this}get isEmpty(){return!this.issues.length}get message(){const e=this.issues.map(t=>{try{return JSON.stringify(t.message),t.message}catch{return"error can not stringify"}});return JSON.stringify(e,null,2)}}const Fe={invalid:"{#path} is invalid",required:"{#path} is a required field"},k={email:"{#path} must be a valid email",invalid:"{#path} must be a string",length:"{#path} must be exactly {#length} characters",lowercase:"{#path} must be a lowercase string",max:"{#path} must be at most {#max} characters",min:"{#path} must be at least {#min} characters",range:"{#path} length be between {#min} and {#max}",regex:'{#path} must match the following: "{#regex}"',uppercase:"{#path} must be a upper case string",url:"{#path} must be a valid URL",uuid:"{#path} must be a valid UUID"},j={equal:"{#path} must be equal to {#equal}",integer:"{#path} must be an integer",invalid:"{#path} must be a number",max:"{#path} must be less than {#max}",min:"{#path} must be greater than {#min}",negative:"{#path} must be a negative number",positive:"{#path} must be a positive number",range:"{#path} be between {#min} and {#max}"},se={false:"{#path} field must be false",invalid:"{#path} must be a boolean",true:"{#path} field must be true"},re={invalid:"{#path} must be a date",max:"{#path} field must be at earlier than {#max}",min:"{#path} field must be later than {#min}"},Zs={invalid:"{#path} must be a object",unknown:"{#path} field has unspecified keys: {#unknown}"},Q={invalid:"{#path} must be a array",length:"{#path} must have {#length} items",max:"{#path} field must have less than or equal to {#max} items",min:"{#path} field must have at least {#min} items",nonempty:"{#path} must have at least one items"},Js={invalid:"{#path} must be include {#enums}"},Qs={invalid:"{#path} is invalid union type"};class M{constructor(){this.rules=new Map}_refine(e,t){return this.rules.set(e,t),this}_remove(e){return this.rules.delete(e),this}_validate(e,t){const s=[...this.rules.values()].map(n=>n(e,t));return Promise.all(s).then(n=>{for(let i=0,a=n.length;i<a;i++){const o=n[i];if(o.status==="invalid")return o}return V(e)})}nullable(){return C.nullable(this)}or(e){return Y.create([this,e])}preprocess(e){return C.preprocess(this,e)}refine(e,t=Fe.invalid){return C.refinement(this,e,t)}required(e=Fe.required){const t=s=>!w(s);return C.required(this,_(t,e))}transform(e){return C.transform(this,e)}union(e){return Y.create([this,e])}async validate(e,t){const s=T.ensure({...t,issue:void 0}),n=await this._validate(e,s);if(n.status==="valid")return n.value;throw s.issue}}class C extends M{constructor(e,t){super(),this.schema=e,this.options=t}static nullable(e){return new C(e,{type:"nullable"})}static preprocess(e,t){return new C(e,{handler:t,type:"preprocess"})}static refinement(e,t,s){const n=_(t,s);return new C(e,{handler:n,type:"refinement"})}static required(e,t){return new C(e,{handler:t,type:"required"})}static transform(e,t){return new C(e,{handler:t,type:"transform"})}get _type(){return this.options.type}async _validate(e,t){const{options:s}=this;if(s.type==="transform"){const i=await this.schema._validate(e,t);if(i.status==="invalid")return i;const a=await s.handler(e);return V(a)}if(s.type==="preprocess"){const i=await s.handler(e);return this.schema._validate(i,t)}if(s.type==="nullable")return ft(e)?V(e):this.schema._validate(e,t);if(s.type==="required"){const i=await s.handler(e,t);return i.status==="invalid"?i:this.schema._validate(e,t)}const n=await this.schema._validate(e,t);return n.status==="invalid"?n:s.handler(e,t)}unwrap(){return this.schema}}class Y extends M{constructor(e){super(),this.inner=e}static create(e){return new Y(e)}async _validate(e,t){if($(e))return V(e);const s=await Promise.all(this.inner.map(async n=>{const i=T.ensure(z(t,["issue"]));try{return[i,await n._validate(e,i)]}catch(a){return[i,a]}}));for(let n=0,i=s.length;n<i;n++){const a=s[n][1];if(a.status==="valid")return a}for(let n=0,i=s.length;n<i;n++){const a=s[n][1];if(a.status==="invalid")return a}return P(t)(Qs.invalid,{value:e})}}class he extends M{static create(){return new he}_validate(e){return V(e)}}class $e extends M{constructor(e){super(),this.inner=e}static create(e){return new $e(e??he.create())}async _validate(e,t){if($(e))return V(e);if(!O(e))return P(t)(Q.invalid,{value:e});const s=await super._validate(e,t);return s.status==="invalid"?s:this._validateInner(e,t)}async _validateInner(e,t){const s=e.map((n,i)=>{const a=T.ensure(t,i);return this.inner._validate(n,a)});return Promise.all(s).then(n=>{for(let i=0,a=n.length;i<a;i++){const o=n[i];if(o.status==="invalid")return o}return V(e)})}length(e,t=Q.length){const s=n=>n.length===e;return this._refine("length",_(s,t,{length:e}))}max(e,t=Q.max){const s=n=>n.length<=e;return this._refine("max",_(s,t,{max:e}))}min(e,t=Q.min){const s=n=>n.length>=e;return this._refine("min",_(s,t,{min:e}))}nonempty(e=Q.nonempty){return this.min(1,e)}get element(){return this.inner}}class we extends M{constructor(e=se.invalid){super(),this.message=e}static create(e=se.invalid){return new we(e)}_validate(e,t){return $(e)?V(e):ze(e)?super._validate(e,t):P(t)(this.message,{value:e})}false(e=se.false){const t=s=>s===!1;return this._refine("boolean",_(t,e))}true(e=se.true){const t=s=>s===!0;return this._refine("boolean",_(t,e))}}class Ee extends M{constructor(e=re.invalid){super(),this.message=e}static create(e=re.invalid){return new Ee(e)}_validate(e,t){return $(e)?V(e):!mt(e)||Number.isNaN(e.getTime())?P(t)(this.message,{value:e}):super._validate(e,t)}max(e,t=re.max){const s=n=>n<=e;return this._refine("max",_(s,t,{max:e}))}min(e,t=re.min){const s=n=>n>=e;return this._refine("min",_(s,t,{min:e}))}}class be extends M{constructor(e){super(),this.inner=e}static create(e){return new be(e)}_validate(e,t){return $(e)?V(e):this.inner.includes(e)?super._validate(e,t):P(t)(Js.invalid,{enums:this.inner,value:e})}get enum(){return this.inner}}class Ie extends M{constructor(e=j.invalid){super(),this.message=e}static create(e=j.invalid){return new Ie(e)}_validate(e,t){return $(e)?V(e):!H(e)||Number.isNaN(e)?P(t)(this.message,{value:e}):super._validate(e,t)}equal(e,t=j.equal){const s=n=>n===e;return this._refine("equal",_(s,t,{equal:e}))}integer(e=j.integer){const t=s=>Number.isInteger(s);return this._refine("integer",_(t,e))}max(e,t=j.max){const s=n=>n<=e;return this._refine("max",_(s,t,{max:e}))}min(e,t=j.min){const s=n=>n>=e;return this._refine("min",_(s,t,{min:e}))}negative(e=j.negative){const t=s=>s<0;return this._refine("negative",_(t,e))}positive(e=j.positive){const t=s=>s>0;return this._refine("positive",_(t,e))}range(e,t,s=j.range){const n=i=>i>=e&&i<=t;return this._refine("range",_(n,s,{max:t,min:e}))}}class Ve extends M{constructor(e){super(),this.inner=e}static create(e){return new Ve(e)}async _validate(e,t){if($(e))return V(e);if(!N(e))return P(t)(Zs.invalid,{value:e});const s=await super._validate(e,t);return s.status==="invalid"?s:this._validateInner(e,t)}async _validateInner(e,t){const s=Object.entries(this.shape).map(([n,i])=>{const a=T.ensure(t,n);return i._validate(e[n],a)});return Promise.all(s).then(n=>{for(let i=0,a=n.length;i<a;i++){const o=n[i][1];if(o.status==="invalid")return o}return V(e)})}passthrough(){return this._remove("strict"),this}get shape(){return this.inner}}const Xs=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,Ys=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,er=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i;class Ce extends M{constructor(e=k.invalid){super(),this.message=e}static create(e=k.invalid){return new Ce(e)}_validate(e,t){return $(e)||e===""?V(e):le(e)?super._validate(e,t):P(t)(this.message,{value:e})}email(e=k.email){const t=s=>Xs.test(s);return this._refine("email",_(t,e))}length(e,t=k.length){const s=n=>n.length===e;return this._refine("length",_(s,t,{length:e}))}lowercase(e=k.lowercase){const t=s=>s===s.toLowerCase();return this._refine("lowercase",_(t,e))}max(e,t=k.max){const s=n=>n.length<=e;return this._refine("max",_(s,t,{max:e}))}min(e,t=k.min){const s=n=>n.length>=e;return this._refine("min",_(s,t,{min:e}))}range(e,t,s=k.range){const n=i=>i.length>=e&&i.length<=t;return this._refine("range",_(n,s,{max:t,min:e}))}regex(e,t=k.regex){const s=n=>e.test(n);return this._refine("regex",_(s,t,{regex:e}))}required(e=Fe.required){const t=s=>!(w(s)||s==="");return C.required(this,_(t,e))}uppercase(e=k.uppercase){const t=s=>s===s.toUpperCase();return this._refine("uppercase",_(t,e))}url(e=k.url){const t=s=>Ys.test(s);return this._refine("url",_(t,e))}uuid(e=k.uuid){const t=s=>er.test(s);return this._refine("uuid",_(t,e))}}const tr=Ce.create,sr=Ie.create,rr=we.create,nr=Ve.create,ir=he.create,ar=$e.create,or=be.create,lr=Ee.create,ur=Y.create,cr=C.refinement,{preprocess:hr,refinement:vr,transform:dr}=C,fr={any:ir,array:ar,boolean:rr,date:lr,enums:or,number:sr,object:nr,preprocess:hr,refine:cr,string:tr,transform:dr,union:ur};function mr(r){return p.jsx("input",{...r,value:r.value||"",style:{height:32}})}function yr(){return p.jsx(qe,{tag:"div",children:Array.from({length:3e3},(r,e)=>p.jsx(qe.Item,{label:`username-${e}`,name:["username",e],rule:fr.string().min(3).max(7).required(),children:p.jsx(mr,{placeholder:`username-${e}`})},e))})}export{yr as A};
