var v=Object.defineProperty;var j=(s,t,e)=>t in s?v(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var r=(s,t,e)=>j(s,typeof t!="symbol"?t+"":t,e);import{g as y}from"./index-DoajXrrx.js";import{c as m,r as b,a as S,b as w,j as i,e as k,g as _,h as x,f as T,v as $,w as C,S as I,d as z}from"./index-D5yQv7SO.js";import{r as M}from"./reflow-BiOaXvFx.js";import{u as U}from"./index-Bmqa16rF.js";function V(s,t){const{checked:e,className:n,classNames:o={},disabled:a,showThumb:l}=t;return{label:m(`${s}__label`,o.label),radio:m(`${s}__radio`),root:m(s,{[`${s}--disabled`]:a,[`${s}--selected`]:e&&!l},n,o.root)}}function A(s,t){const{checked:e,disabled:n,label:o,onChange:a,title:l,value:u}=s,c=S("segmented-item"),h=V(c,s),g=w(s);return i.jsxs("label",{ref:t,className:h.root,style:g.root,children:[i.jsx("input",{className:h.radio,checked:e,disabled:n,type:"radio",onChange:()=>{!n&&a(u)}}),i.jsx("div",{className:h.label,style:g.label,title:l,children:o})]})}const F=b.forwardRef(A);function R(s,t){const{block:e,className:n,classNames:o={},disabled:a,size:l}=t;return{group:m(`${s}__group`,o.group),root:m(s,{[`${s}--block`]:e,[`${s}--disabled`]:a,[`${s}--lg`]:l==="large",[`${s}--sm`]:l==="small"},n,o.root),thumb:m(`${s}__thumb`,o.thumb)}}class D{constructor(t){r(this,"$group",{current:null});r(this,"$thumb",{current:null});r(this,"history");r(this,"inTransition",!1);r(this,"items",new Map);r(this,"latest",null);r(this,"showThumb",!1);this.history=[null,t]}get group(){return this.$group.current}get thumb(){return this.$thumb.current}}class H{constructor(t,e){r(this,"handleEnter",t=>{const{group:e,history:n,inTransition:o,items:a,latest:l}=this.states,u=a.get(n[0]);if(!u||!e)return;const c=o&&l?l:y(u);this.setInTransition(!0),this.setThumbStyles(t,e,c),M(t)});r(this,"handleEntering",t=>{const{group:e,history:n,items:o}=this.states,a=o.get(n[1]);!a||!e||this.setThumbStyles(t,e,y(a))});r(this,"handleEntered",t=>{t.$remove("transform"),t.$remove("width"),this.setShowThumb(!1),this.setInTransition(!1)});r(this,"setHistory",t=>{const{history:e}=this.states;this.states.history=[e[1],t]});r(this,"setInTransition",t=>{this.states.inTransition=t});r(this,"setItem",(t,e)=>{const{items:n}=this.states;e?n.set(t,e):n.delete(t)});r(this,"setShowThumb",t=>{const e=this.states.showThumb!==t;return e&&this.forceUpdate(),this.states.showThumb=t,e});r(this,"setThumbStyles",(t,e,n)=>{const o=y(e),a=n.left-o.left;t.$set("transform",`translate3d(${a}px, 0, 0)`),t.$set("width",`${n.width}px`)});this.forceUpdate=t,this.states=e}}function O(s){const t=k(),e=_(()=>new D(s)),n=b.useMemo(()=>new H(t,e),[t,e]),o=x(s,()=>(n.setHistory(s),e.thumb&&e.inTransition&&n.handleEntering(e.thumb),n.setShowThumb(!0)));return{actions:n,returnEarly:o,states:e}}function P(s,t){var a;const{defaultValue:e,onChange:n,value:o}=s;return U({defaultValue:T(e,(a=t[0])==null?void 0:a.value),onChange:n,value:o})}const W={block:!1};function Q(s=[]){return s.map(t=>{if(!$(t))return{label:t,title:`${t}`,value:t};const{label:e,title:n}=t,o=T(n,$(e)?void 0:`${e}`);return{...t,title:o}})}function Y(s,t){const e=C(s,{...W,size:I.useState()}),{disabled:n,options:o}=e,a=S("segmented"),l=R(a,e),u=w(e),c=b.useMemo(()=>Q(o),[o]),[h,g]=P(e,c),{returnEarly:E,states:f,actions:p}=O(h);return E?null:i.jsx("div",{ref:t,className:l.root,style:u.root,children:i.jsxs("div",{ref:f.$group,className:l.group,style:u.group,children:[f.showThumb&&i.jsx(z,{appear:!0,when:!0,timeouts:3e3,classNames:`${a}-thumb-motion`,onEnter:p.handleEnter,onEntering:p.handleEntering,onEntered:p.handleEntered,children:i.jsx("div",{ref:f.$thumb,className:l.thumb,style:u.thumb})}),c.map(d=>b.createElement(F,{...d,key:d.value,ref:N=>{p.setItem(d.value,N)},checked:h===d.value,disabled:n||d.disabled,showThumb:f.showThumb,onChange:g}))]})})}const q=b.forwardRef(Y);function X(){return i.jsx(q,{options:["Daily","Weekly","Monthly","Quarterly","Yearly"],onChange:s=>{console.log(s)}})}export{X as A};
