var w=Object.defineProperty;var $=(s,t,e)=>t in s?w(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var i=(s,t,e)=>$(s,typeof t!="symbol"?t+"":t,e);import{g as p,B as u}from"./index-BJZjkXzT.js";import{e as g,g as j,r as d,h as E,a as f,j as o,d as y,c as m,k as C,w as b,b as S,l as N}from"./index-8OWsvV1j.js";import{S as x}from"./index-BEIq7Lzj.js";import{G as B}from"./index-DlGkuLb7.js";import{r as R}from"./reflow-wpkLZ7ov.js";const A=Array.from({length:10},(s,t)=>`${t}`);class F{constructor(t){i(this,"$wrapper",{current:null});i(this,"history");i(this,"items",new Map);i(this,"showRawChar",!0);this.history=[null,t]}get wrapper(){return this.$wrapper.current}}class k{constructor(t,e){i(this,"onEnter",t=>{const{history:e,items:r,wrapper:n}=this.states,a=r.get(e[0]);!n||!a||(this.setOffsetStyles(t,n,a),R(t))});i(this,"onEntering",t=>{const{history:e,items:r,wrapper:n}=this.states,a=r.get(e[1]);!n||!a||this.setOffsetStyles(t,n,a)});i(this,"onEntered",()=>{this.setShowRawChar(!0)});i(this,"setHistory",t=>{const{history:e}=this.states;this.states.history=[e[1],t]});i(this,"setItem",(t,e)=>{this.states.items.set(t,e)});i(this,"setOffsetStyles",(t,e,r)=>{const n=p(e),a=p(r),c=n.top-a.top;t.$set("transform",`translate3d(0, ${c}px, 0)`)});i(this,"setShowRawChar",t=>{const e=this.states.showRawChar!==t;return e&&this.forceUpdate(),this.states.showRawChar=t,e});this.forceUpdate=t,this.states=e}}function M(s){const{char:t}=s,e=g(),r=j(()=>new F(t)),n=d.useMemo(()=>new k(e,r),[e,r]),a=E(t,()=>(n.setHistory(t),n.setShowRawChar(!1)));return{actions:n,returnEarly:a,states:r}}function W(s){const{char:t}=s,e=f("badge-scroll-number"),{actions:r,returnEarly:n,states:a}=M(s);return n?null:a.showRawChar?o.jsx(o.Fragment,{children:t}):o.jsx(y,{appear:!0,when:!0,classNames:`${e}-motion`,onEnter:r.onEnter,onEntering:r.onEntering,onEntered:r.onEntered,children:o.jsx("span",{ref:a.$wrapper,className:e,children:A.map(c=>o.jsx("span",{ref:l=>{r.setItem(c,l)},children:c},c))})},t)}function _(s,t){const{dot:e,className:r,classNames:n={}}=t;return{root:m(s,{[`${s}--dot`]:e},r,n.root),indicator:m(`${s}__indicator`,n.indicator)}}function O(s){const{count:t,maxCount:e}=s;return d.useMemo(()=>{if(!C(t))return null;const r=Math.min(t,e),n=`${Math.abs(r)}`.split("").map((a,c)=>({char:a,key:`${c}`,scroll:!0}));return r<0&&n.unshift({char:"-",key:"-",scroll:!1}),t>e&&n.push({char:"+",key:"+",scroll:!1}),n},[t,e])}const U={maxCount:99},v={onEnter:s=>{s.$set("width","0px")},onEntering:s=>{s.$set("width",`${s.scrollWidth}px`)},onEntered:s=>{s.$remove("width")},onEnterCancel:s=>{s.$set("width",`${s.offsetWidth}px`)},onExit:s=>{s.$set("width",`${s.offsetWidth}px`)},onExiting:s=>{s.$set("width","0px")},onExited:s=>{s.$remove("width")},onExitCancel:s=>{s.$set("width",`${s.offsetWidth}px`)}};function G(s){const t=b(s,U),{children:e}=t,r=f("badge"),n=_(r,t),a=S(t),c=O(t);return o.jsxs("span",{className:n.root,style:a.root,children:[e,N(c)&&!!c.length&&o.jsx("sup",{className:n.indicator,style:a.indicator,children:o.jsx(B,{classNames:`${r}-scroll-group-motion`,...v,children:c.map(l=>o.jsx("span",{className:`${r}-scroll-group`,children:l.scroll?o.jsx(W,{char:l.char}):l.char},l.key))})})]})}function D(s){return o.jsx("div",{children:"badge.ribbon"})}const h=Object.assign(G,{Ribbon:D});function q(){return o.jsxs(x,{children:[o.jsx(h,{count:12,children:o.jsx(u,{children:"Badge"})}),o.jsx(h,{count:23,children:o.jsx(u,{children:"Badge"})})]})}function z(){const[s,t]=d.useState(12);return o.jsx(x,{children:o.jsx(h,{count:s,children:o.jsx(u,{onClick:()=>{t(~~(Math.random()*100))},children:"Badge"})})})}function J(){return o.jsx(h,{dot:!0,count:1,children:o.jsx(u,{children:"Badge"})})}function K(){return o.jsx("div",{children:"建设中,敬请期待!"})}export{q as A,z as a,J as b,K as c};
