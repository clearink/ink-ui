var w=Object.defineProperty;var g=(s,t,e)=>t in s?w(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var i=(s,t,e)=>g(s,typeof t!="symbol"?t+"":t,e);import{g as p,B as l}from"./index-BxPhnewK.js";import{S as f}from"./index-C5pLwClu.js";import{m as $,n as y,p as C,r as d,q as E,a as x,j as o,l as j,c as m,t as S,w as b,k as N,v as B}from"./index-BBhucVwM.js";import{G as R}from"./index-CNRAa_B3.js";function A(s){return s?getComputedStyle(s).opacity:$().offsetHeight}const F=Array.from({length:10},(s,t)=>`${t}`);class k{constructor(t){i(this,"$wrapper",{current:null});i(this,"history");i(this,"items",new Map);i(this,"showRawChar",!0);this.history=[null,t]}get wrapper(){return this.$wrapper.current}}class M{constructor(t,e){i(this,"onEnter",t=>{const{history:e,items:r,wrapper:n}=this.states,a=r.get(e[0]);!n||!a||(this.setOffsetStyles(t,n,a),A(t))});i(this,"onEntering",t=>{const{history:e,items:r,wrapper:n}=this.states,a=r.get(e[1]);!n||!a||this.setOffsetStyles(t,n,a)});i(this,"onEntered",()=>{this.setShowRawChar(!0)});i(this,"setHistory",t=>{const{history:e}=this.states;this.states.history=[e[1],t]});i(this,"setItem",(t,e)=>{this.states.items.set(t,e)});i(this,"setOffsetStyles",(t,e,r)=>{const n=p(e),a=p(r),c=n.top-a.top;t.$set("transform",`translate3d(0, ${c}px, 0)`)});i(this,"setShowRawChar",t=>{const e=this.states.showRawChar!==t;return e&&this.forceUpdate(),this.states.showRawChar=t,e});this.forceUpdate=t,this.states=e}}function W(s){const{char:t}=s,e=y(),r=C(()=>new k(t)),n=d.useMemo(()=>new M(e,r),[e,r]),a=E(t,()=>(n.setHistory(t),n.setShowRawChar(!1)));return{actions:n,returnEarly:a,states:r}}function _(s){const{char:t}=s,e=x("badge-scroll-number"),{actions:r,returnEarly:n,states:a}=W(s);return n?null:a.showRawChar?o.jsx(o.Fragment,{children:t}):o.jsx(j,{appear:!0,when:!0,classNames:`${e}-motion`,onEnter:r.onEnter,onEntering:r.onEntering,onEntered:r.onEntered,children:o.jsx("span",{ref:a.$wrapper,className:e,children:F.map(c=>o.jsx("span",{ref:u=>{r.setItem(c,u)},children:c},c))})},t)}function v(s,t){const{className:e,classNames:r={}}=t;return{indicator:m(`${s}__indicator`,r.indicator),root:m(s,{},e,r.root)}}function O(s){const{count:t,maxCount:e}=s;return d.useMemo(()=>{if(!S(t))return null;const r=Math.min(t,e),n=`${Math.abs(r)}`.split("").map((a,c)=>({char:a,key:`${c}`,scroll:!0}));return r<0&&n.unshift({char:"-",key:"-",scroll:!1}),t>e&&n.push({char:"+",key:"+",scroll:!1}),n},[t,e])}const U={maxCount:99},G={onEnter:s=>{s.$set("width","0px")},onEntering:s=>{s.$set("width",`${s.scrollWidth}px`)},onEntered:s=>{s.$remove("width")},onEnterCancel:s=>{s.$set("width",`${s.offsetWidth}px`)},onExit:s=>{s.$set("width",`${s.offsetWidth}px`)},onExiting:s=>{s.$set("width","0px")},onExited:s=>{s.$remove("width")},onExitCancel:s=>{s.$set("width",`${s.offsetWidth}px`)}};function H(s){const t=b(s,U),{children:e}=t,r=x("badge"),n=v(r,t),a=N(t),c=O(t);return o.jsxs("span",{className:n.root,style:a.root,children:[e,B(c)&&!!c.length&&o.jsx("sup",{className:n.indicator,style:a.indicator,children:o.jsx(R,{classNames:`${r}-scroll-group-motion`,...G,children:c.map(u=>o.jsx("span",{className:`${r}-scroll-group`,children:u.scroll?o.jsx(_,{char:u.char}):u.char},u.key))})})]})}function D(s){return o.jsx("div",{children:"badge.ribbon"})}const h=Object.assign(H,{Ribbon:D});function V(){return o.jsxs(f,{children:[o.jsx(h,{count:12,children:o.jsx(l,{children:"Badge"})}),o.jsx(h,{count:23,children:o.jsx(l,{children:"Badge"})})]})}function z(){const[s,t]=d.useState(12);return o.jsx(f,{children:o.jsx(h,{count:s,children:o.jsx(l,{onClick:()=>{t(~~(Math.random()*100))},children:"Badge"})})})}function J(){return o.jsx("div",{children:"建设中,敬请期待!"})}export{V as A,z as a,J as b};
